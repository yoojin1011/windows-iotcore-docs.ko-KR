---
title: Azure IoT 디바이스 에이전트
author: rcheeran
ms.author: rcheeran
ms.date: 06/25/2019
ms.topic: article
description: Windows IoT에서 Azure IoT 장치 에이전트를 사용 하 여 장치를 관리 하는 방법에 대해 알아봅니다.
keywords: windows iot, Azure IoT, Azure 장치 에이전트, 장치 관리, 원격 관리
ms.openlocfilehash: 762ac7c3e0b40ce3bbe5cd33fba13838318198d7
ms.sourcegitcommit: ea060254f9c4c25afcd0245c897b9e1425321859
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/07/2020
ms.locfileid: "75721448"
---
# <a name="azure-iot-device-agent"></a><span data-ttu-id="2f7b0-104">Azure IoT 디바이스 에이전트</span><span class="sxs-lookup"><span data-stu-id="2f7b0-104">Azure IoT Device Agent</span></span>

<span data-ttu-id="2f7b0-105">연결 된 장치에서 원격 장치 관리는 시스템 운영자가 필요로 하는 주요 기능 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-105">When it comes to connected devices, remote device management is one of the key features that system operators need.</span></span> <span data-ttu-id="2f7b0-106">장치에 대 한 로컬 또는 물리적 액세스 없이 운영자가 원격으로 장치에서 속성을 구성 하 고 소프트웨어를 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-106">It enables operators to configure properties and update software on the device remotely, without the need to have local or physical access to the device.</span></span> <span data-ttu-id="2f7b0-107">가정용 어플라이언스, HVAC 시스템 및 기타와 같은 장치에서 실행 되는 Windows IoT Core 및 Windows IoT Enterprise를 사용 하는 경우 사용자 지정 가능한 경량 장치 관리 솔루션이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-107">With Windows IoT Core and Windows IoT Enterprise running on devices such as home appliances, HVAC systems and others, there is a need for a customizable, light weight device management solution.</span></span> <span data-ttu-id="2f7b0-108">Windows 10 버전은 이미 [OMA DM](https://en.wikipedia.org/wiki/OMA_Device_Management)을 기반으로 하는 MDM (모바일 장치 관리)을 제공 하지만이는 주로 SCCM 또는 Intune과 같은 관리 도구를 사용 하 여 엔터프라이즈 솔루션에서 활용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-108">While Windows 10 versions already offers Mobile Device Management (MDM) based on [OMA DM](https://en.wikipedia.org/wiki/OMA_Device_Management), this is mainly utilized in enterprise solutions with management tools such as SCCM or Intune.</span></span> <span data-ttu-id="2f7b0-109">이러한 솔루션은 엔터프라이즈 설정에 배치 된 장치에 적합 하지만 IoT 솔루션에 표시 되는 다양 한 설정에 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-109">While those solutions are well suited for devices placed in an enterprise setting, it has challenges in the more diverse settings that we see in IoT solutions.</span></span> <span data-ttu-id="2f7b0-110">IoT 장치에는 어려울 수 있는 간단 하 고 작은 공간 장치 관리 솔루션이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-110">IoT devices also require a lightweight, small footprint device management solution which can be a challenge.</span></span> <span data-ttu-id="2f7b0-111">Microsoft는 또한 [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/iot-hub-device-management-overview) 및 해당 [SDK](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-sdks)를 사용 하 여 장치 관리 기능을 제공 합니다. [Azure IoT 장치 에이전트](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) 는 모바일 장치 관리에서 사용 되는 것과 동일한 표준 [CSP (구성 서비스 공급자)](https://docs.microsoft.com/windows/client-management/mdm/configuration-service-provider-reference) 에서 작동 하는 IoT Hub를 통해 클라우드의 장치 관리 기능을 함께 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-111">Microsoft also offers device management capabilities using [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/iot-hub-device-management-overview) and its [SDK](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-sdks).The [Azure IoT Device Agent](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) brings both these capabilities together: device management capabilities in the cloud via the IoT Hub which works with the same standard [Configuration Service Providers(CSP)](https://docs.microsoft.com/windows/client-management/mdm/configuration-service-provider-reference) as used by Mobile Device Management.</span></span> <span data-ttu-id="2f7b0-112">Oem은 Azure 장치 에이전트를 사용 하 여 코드를 작성 하지 않고도 이러한 장치 관리 기능을 제공 하는 장치를 빌드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-112">With the Azure Device Agent, OEMs can build devices that offer these device management capabilities without writing any code.</span></span> 

<span data-ttu-id="2f7b0-113">Azure 장치 에이전트는 원격 장치 관리 기능을 사용 하도록 설정 하는 빌드 준비 된 오픈 소스 패키지입니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-113">The Azure Device Agent is a ready-to-build open-source package that enables remote device management capabilities.</span></span> <span data-ttu-id="2f7b0-114">Azure 장치 에이전트는 Windows 10 IoT Core 및 Windows 10 IoT Enterprise에서 지원 되며 IoT Hub를 통해 연결 된 장치에서 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-114">The Azure Device Agent is supported on Windows 10 IoT Core and Windows 10 IoT Enterprise and works on devices connected via the IoT Hub.</span></span> <span data-ttu-id="2f7b0-115">이제 Oem은 장치 관리를 위해 SCCM, Intune 또는 Azure IoT Hub를 지 원하는 장치를 빌드하고 고객에 게 가장 적합 한 장치 관리 솔루션을 선택할 수 있도록 남겨 둘 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-115">OEMs can now build devices that support SCCM, Intune or Azure IoT Hub for device management and leave it up to their customers to select the device management solution that fits them best.</span></span>   

![장치 관리 Azure IoT Hub](../media/AzureIoTDM/azureDM.png)


## <a name="how-does-it-work"></a><span data-ttu-id="2f7b0-117">어떤 방식으로 작동합니까?</span><span class="sxs-lookup"><span data-stu-id="2f7b0-117">How does it work?</span></span>

<span data-ttu-id="2f7b0-118">[Azure IoT 장치 에이전트](https://aka.ms/iot-core-azure-dm-client) 는 두 가지 핵심 구성 요소로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-118">The [Azure IoT Device Agent](https://aka.ms/iot-core-azure-dm-client) consists of 2 core components.</span></span> 

<span data-ttu-id="2f7b0-119">장치 프로 비전 서비스 클라이언트 (DPS 클라이언트)는 장치 프로 비전을 자동화 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-119">The Device Provisioning Service Client (DPS Client) automates device provisioning.</span></span> <span data-ttu-id="2f7b0-120">장치의 등록 키 및 DPS ScopeID를 사용 하 여 Azure 장치 프로 비전 서비스에 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-120">It connects to the Azure Device Provisioning Service with the device's Enrollment Key and DPS ScopeID.</span></span> <span data-ttu-id="2f7b0-121">Azure DPS 서비스는 장치를 식별 하 여 구성 된 IoT Hub에서 프로 비전 하 고 장치에 대 한 연결 문자열을 다시 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-121">The Azure DPS service identifies the device and provisions it in the configured IoT Hub and returns a connection string back to the device.</span></span> <span data-ttu-id="2f7b0-122">그러면 DPS 클라이언트는이 연결 문자열을 사용 하 여 장치를 올바른 IoT Hub에 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-122">The DPS client then uses this connection string to connect the device to the right IoT Hub.</span></span>  

<span data-ttu-id="2f7b0-123">장치 관리 클라이언트는 [구성 서비스 공급자](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference)(CSP)를 사용 하 여 원격 장치 관리 기능을 사용 하도록 설정 합니다. Azure 장치 에이전트의 원격 관리 기능은 필요한 기능만 선택할 수 있는 플러그 인 모델을 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-123">The Device Management Client enables remote device management capabilities using the [Configuration Service Providers](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference), CSP) The Azure Device Agent's remote management capabilities supports a plug-in model which allows you to select only the capabilities you need.</span></span> <span data-ttu-id="2f7b0-124">뿐만 아니라 플러그 인 아키텍처가 확장 가능 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-124">In addition to that, the plug-in architecture is extendable.</span></span> <span data-ttu-id="2f7b0-125">필요한 장치 관리 기능에 대 한 플러그 인을 직접 작성 하 여 Azure 장치 에이전트에 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-125">You can write your own plug-in for a device management capability that you need and add it to the Azure Device Agent.</span></span> <span data-ttu-id="2f7b0-126">모든 장치 관리 기능은 장치 쌍 또는 모듈 쌍 속성 및 명령을 사용 하 여 원격으로 액세스할 수 있으므로 모든 Windows IoT 장치에 대해 단일 창의 투명 한 관리 방법을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-126">All the device management capabilities are remotely accessible using the Device Twin or Module Twin properties and commands, thereby enabling a single-pane-of-glass management approach for all your Windows IoT devices.</span></span> <span data-ttu-id="2f7b0-127">사용 가능한 장치 관리 기능의 전체 목록은 [다음](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/reference.md) 을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-127">For a complete list of device management capabilities available refer to [this](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/reference.md)</span></span>

<span data-ttu-id="2f7b0-128">이 외에도, Azure 장치 에이전트는 장치에서 실행 되는 다른 UWP 응용 프로그램에 대 한 SAS 토큰을 만들고 관리 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-128">In addition to this, the Azure Device Agent also creates and manages SAS tokens for other UWP applications running on the device.</span></span> <span data-ttu-id="2f7b0-129">Azure 장치 에이전트는 다른 UWP 앱을 장치 쌍으로 프로 비전 하거나 모듈 쌍으로 프로 비전 하 고 해당 하는 각 TPM 슬롯에 연결 문자열을 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-129">The Azure Device Agent can provision other UWP apps as either a Device Twin or as a Module Twin and add their connection strings to the respective TPM slots.</span></span> <span data-ttu-id="2f7b0-130">UWP 앱은 [Uwp 브리지](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/uwp-bridge.md) 를 활용 하 여 TPM 슬롯에서 연결 문자열을 읽고이를 사용 하 여 IoT Hub에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-130">The UWP app leverages the [UWP Bridge](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/uwp-bridge.md) to read their connection string from the TPM slot and can use that to connect to the IoT Hub.</span></span> 

## <a name="how-to-get-started"></a><span data-ttu-id="2f7b0-131">시작하는 방법</span><span class="sxs-lookup"><span data-stu-id="2f7b0-131">How to get started?</span></span>

<span data-ttu-id="2f7b0-132">Azure IoT 장치 에이전트는 GitHub에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-132">The Azure IoT Device Agent is available on GitHub.</span></span> <span data-ttu-id="2f7b0-133">프로젝트에는 신속 하 게 시작 하기 위한 샘플도 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-133">The project also includes samples to get started quickly.</span></span> <span data-ttu-id="2f7b0-134">자세한 내용은 GitHub [리포지토리](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-134">For more information, check out our GitHub [repo](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/device-agent.md)</span></span>

## <a name="migrating-from-azure-device-agent-v1-to-v2"></a><span data-ttu-id="2f7b0-135">Azure 장치 에이전트 V1에서 V2로 마이그레이션</span><span class="sxs-lookup"><span data-stu-id="2f7b0-135">Migrating from Azure Device Agent V1 to V2</span></span>
<span data-ttu-id="2f7b0-136">현재 v1 버전의 장치 에이전트를 사용 중인 경우 v 1과 v 2의 중요 한 변경 사항은 V2 버전에서 Azure 장치 에이전트가 더 이상 UWP 앱과의 연결을 공유 하지 않기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-136">If you are currently using the v1 version of the Device Agent, one significant change between V1 and V2 is that in the V2 version, the Azure Device Agent no longer shares the connection with an UWP app.</span></span> <span data-ttu-id="2f7b0-137">IoT Hub에 대 한 향상 된 기능을 통해 UWP 앱과 Azure 장치 에이전트는 모두 독립 된 연결 문자열을 포함 하 고 IoT Hub에서 동일한 장치에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-137">With enhancements to the IoT Hub you can now have both the UWP app and the Azure Device Agent have independent connection strings and still be associated with the same device in IoT Hub.</span></span> <span data-ttu-id="2f7b0-138">자세한 내용은 [여기](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/migration-from-old-client.md) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-138">Refer [here](https://github.com/ms-iot/azure-client-tools/blob/master/docs/device-agent/migration-from-old-client.md) for more details.</span></span>

<span data-ttu-id="2f7b0-139">Azure 장치 에이전트 V1에 대 한 자세한 내용은 [여기](https://docs.microsoft.com/windows/iot-core/manage-your-device/azureiotdm)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-139">For more information on the Azure Device Agent V1, refer [here](https://docs.microsoft.com/windows/iot-core/manage-your-device/azureiotdm).</span></span>

## <a name="other-useful-tools"></a><span data-ttu-id="2f7b0-140">기타 유용한 도구</span><span class="sxs-lookup"><span data-stu-id="2f7b0-140">Other Useful Tools</span></span> 
### <a name="dm-mock-portal"></a><span data-ttu-id="2f7b0-141">DM 모의 포털</span><span class="sxs-lookup"><span data-stu-id="2f7b0-141">DM Mock Portal</span></span>
<span data-ttu-id="2f7b0-142">[DM 모의 포털](https://github.com/ms-iot/azure-client-tools/blob/master/docs/dm-mock-portal/dm-mock-portal.md) 은 IoT Hub의 자동 장치 관리 기능을 사용 하 여 개별 장치 또는 여러 장치에서 장치 쌍 또는 모듈 쌍 속성을 설정 하는 데 사용할 수 있는 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-142">[DM Mock Portal](https://github.com/ms-iot/azure-client-tools/blob/master/docs/dm-mock-portal/dm-mock-portal.md) is an application which can be used to set Device Twin or Module Twin properties on an individual device or across multiple devices, using the IoT Hub’s Automatic Device Management capabilities.</span></span> 

### <a name="tpm-tool---limpetexe"></a><span data-ttu-id="2f7b0-143">TPM 도구-Limpet</span><span class="sxs-lookup"><span data-stu-id="2f7b0-143">TPM Tool - Limpet.exe</span></span>
<span data-ttu-id="2f7b0-144">고객은 Azure 장치 프로 비전 서비스를 사용 하 여 장치를 자동으로 연결 하 고 구성 하 여 프로덕션 후에 IoT Hub 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-144">The Azure Device Provisioning Service allows customers to automatically associate and configure a device with an IoT Hub post-production.</span></span> <span data-ttu-id="2f7b0-145">이 프로세스의 경우 장치 프로 비전 서비스에는 장치가 작동 중일 때 장치를 안전 하 게 구성 하는 데 도움이 되는 고유 하 고 challengeable 장치 ID가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-145">For this process, Device Provisioning Service will need a unique and challengeable device ID to help configure the device securely when the device is put in operation.</span></span> <span data-ttu-id="2f7b0-146">장치 프로 비전 서비스는이 목적을 위해 TPM의 EKeyPub (공개 인증 키)를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-146">Device Provisioning Service uses the TPM’s public Endorsement Key (EKeyPub) for this purpose.</span></span> <span data-ttu-id="2f7b0-147">DPS에 장치를 등록 하려면 장치에서 EKeyPub을 수집 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-147">To register the device with DPS, the EKeyPub needs to be harvested from the device.</span></span> <span data-ttu-id="2f7b0-148">이 단계를 수행 하는 데 소요 되는 시간은 프로덕션 중 (장치에 대 한 종단 간 테스트 중)입니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-148">The preferred time for this step is during production (during end-of-line testing of the device).</span></span> <span data-ttu-id="2f7b0-149">그러나 필요한 경우에도 프로덕션 후에 프로세스를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-149">However, the process can also be done post-production if needed.</span></span>  

<span data-ttu-id="2f7b0-150">Microsoft는 장치 프로 비전 서비스 등록 프로세스를 간소화 하는 Limpet 도구를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-150">Microsoft provides the Limpet tool to streamline the Device Provisioning Service registration process.</span></span> <span data-ttu-id="2f7b0-151">제조 설정에 따라 온라인 연결을 사용할 수 있는 경우 장치 프로 비전 서비스와 직접 Limpet를 사용 하 여 장치를 등록 하거나, Limpet에서 장치를 사용 하 여 장치를 나중에 오프 라인으로 등록 하기 위해 EKeyPub를 수집할 수 있습니다. 프로 비전 서비스.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-151">Depending on your manufacturing setup, if there is an online connection available, the device can be registered using Limpet directly with Device Provisioning Service, or Limpet can harvest the EKeyPub for a later, offline registration of the device with Device Provisioning Service.</span></span>

<span data-ttu-id="2f7b0-152">Limpet를 사용 하 여 장치 프로 비전 서비스 등록 프로세스에 대 한 자세한 내용은이 [리포지토리](https://github.com/ms-iot/azure-client-tools/blob/master/docs/limpet/limpet.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-152">For more details on the Device Provisioning Service registration process with Limpet, see this [repo](https://github.com/ms-iot/azure-client-tools/blob/master/docs/limpet/limpet.md).</span></span>

<span data-ttu-id="2f7b0-153">라이선스: Limpet는 MIT 오픈 소스 라이선스에 따라 사용이 허가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f7b0-153">License: Limpet is licensed under the MIT open source license.</span></span> 
